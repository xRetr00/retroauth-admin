<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetroAuth Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-gray-900 text-white">
    <div id="app" class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold mb-2">RetroAuth Admin Panel</h1>
            <p class="text-gray-400">License Management System</p>
        </header>

        <div class="grid md:grid-cols-2 gap-8">
            <!-- Create License -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-2xl font-bold mb-4">Create License</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-400 mb-2">Duration (days)</label>
                        <input v-model="newLicense.duration" type="number" class="w-full bg-gray-700 rounded p-2 text-white" min="1">
                    </div>
                    <div>
                        <label class="block text-gray-400 mb-2">Level</label>
                        <input v-model="newLicense.level" type="number" class="w-full bg-gray-700 rounded p-2 text-white" min="1">
                    </div>
                    <button @click="createLicense" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                        Create License
                    </button>
                </div>
                <!-- Result Display -->
                <div v-if="createdLicense" class="mt-4 p-4 bg-gray-700 rounded">
                    <h3 class="font-bold text-green-400">License Created!</h3>
                    <p class="mt-2">Key: {{createdLicense.key}}</p>
                    <p>Expires: {{createdLicense.expires_at}}</p>
                </div>
            </div>

            <!-- Revoke License -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-2xl font-bold mb-4">Revoke License</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-400 mb-2">License Key</label>
                        <input v-model="revokeKey" type="text" class="w-full bg-gray-700 rounded p-2 text-white">
                    </div>
                    <button @click="revokeLicense" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                        Revoke License
                    </button>
                </div>
                <!-- Result Display -->
                <div v-if="revokeMessage" class="mt-4 p-4" :class="revokeSuccess ? 'bg-green-900' : 'bg-red-900'">
                    <p>{{revokeMessage}}</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    apiUrl: 'https://retroauth.rf.gd/api/v1',
                    newLicense: {
                        duration: 30,
                        level: 1
                    },
                    createdLicense: null,
                    revokeKey: '',
                    revokeMessage: '',
                    revokeSuccess: false
                }
            },
            methods: {
                async createLicense() {
                    try {
                        const response = await axios.post(`${this.apiUrl}/licenses/create`, this.newLicense)
                        this.createdLicense = response.data.license
                    } catch (error) {
                        alert('Error creating license: ' + error.message)
                    }
                },
                async revokeLicense() {
                    try {
                        const response = await axios.post(`${this.apiUrl}/licenses/revoke`, {
                            key: this.revokeKey
                        })
                        this.revokeMessage = response.data.message
                        this.revokeSuccess = true
                    } catch (error) {
                        this.revokeMessage = error.response?.data?.message || 'Error revoking license'
                        this.revokeSuccess = false
                    }
                }
            }
        }).mount('#app')
    </script>
</body>
</html> 
